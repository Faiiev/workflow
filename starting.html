<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 from src/site/apt/starting.apt at 2018-03-10
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180310" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Nirmata Workflow &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/NirmataOSS/workflow">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Nirmata Workflow</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-03-10<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.9.1</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project</li>
    <li><a href="index.html" title="About"><span class="none"></span>About</a></li>
    <li class="active"><a href="#"><span class="none"></span>Getting Started</a></li>
    <li><a href="admin.html" title="Administration"><span class="none"></span>Administration</a></li>
    <li><a href="reference.html" title="Reference"><span class="none"></span>Reference</a></li>
    <li><a href="limits.html" title="Limits"><span class="none"></span>Limits</a></li>
    <li><a href="example.html" title="Example"><span class="none"></span>Example</a></li>
      <li class="nav-header">Details</li>
    <li><a href="source-repository.html" title="Source Code"><span class="none"></span>Source Code</a></li>
    <li><a href="issue-tracking.html" title="Issues"><span class="none"></span>Issues</a></li>
    <li><a href="apidocs/index.html" title="JavaDoc"><span class="none"></span>JavaDoc</a></li>
    <li><a href="team-list.html" title="Team"><span class="none"></span>Team</a></li>
      <li class="nav-header">Reports</li>
    <li><a href="project-summary.html" title="Summary"><span class="none"></span>Summary</a></li>
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="license.html" title="License"><span class="none"></span>License</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="Getting_Started"></a>Getting Started</h2>
<div class="section">
<h3><a name="Background"></a>Background</h3>
<p>The basic unit is a <a href="./apidocs/com/nirmata/workflow/models/Task.html">Task</a>. Tasks have an id, <a href="./apidocs/com/nirmata/workflow/models/TaskType.html">type</a>, optional metadata, and zero or more children. Tasks are submitted to be executed through a <a href="./apidocs/com/nirmata/workflow/WorkflowManager.html">WorkflowManager</a> instance. WorkflowManager instances are created using a <a href="./apidocs/com/nirmata/workflow/WorkflowManagerBuilder.html">WorkflowManagerBuilder</a>. The work of a task is executed by a <a href="./apidocs/com/nirmata/workflow/executor/TaskExecutor.html">TaskExecutor</a> instance which you must provide an implementation for.</p></div>
<div class="section">
<h3><a name="Prerequisites"></a>Prerequisites</h3>
<p>Nirmata Workflow uses <a class="externalLink" href="http://zookeeper.apache.org/">Apache ZooKeeper</a> and <a class="externalLink" href="http://curator.apache.org/">Apache Curator</a>. You will need to run an Apache ZooKeeper cluster in order to use the Workflow Manager. You will also need to create a Curator client instance for the Workflow Manager to use. Refer to the documentation of each of these projects for details.</p>
<p>NOTE: Nirmata Workflow is a Java 8 Library</p></div>
<div class="section">
<h3><a name="Using_in_Your_Project"></a>Using in Your Project</h3>
<p>Nirmata Workflow is available from Maven Central:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center">GroupId</td>
<td align="center">com.nirmata.workflow</td></tr>
<tr class="b">
<td align="center">ArtifactId</td>
<td align="center">nirmata-workflow</td></tr></table>
<ul>
<li>From Maven
<div class="source"><pre class="prettyprint">&lt;dependency&gt;
    &lt;groupId&gt;com.nirmata.workflow&lt;/groupId&gt;
    &lt;artifactId&gt;nirmata-workflow&lt;/artifactId&gt;
    &lt;version&gt;${nirmata-workflow-version}&lt;/version&gt;
&lt;/dependency&gt;</pre></div></li>
<li>From Gradle
<div class="source"><pre class="prettyprint">dependencies {
    compile('com.nirmata.workflow:nirmata-workflow:$nirmataWorkflowVersion')
}</pre></div></li></ul></div>
<div class="section">
<h3><a name="Tasks"></a>Tasks</h3>
<p>You can create task objects programmatically or via a file/stream. To load via file/stream, you can use the utility <tt>TaskLoader.load()</tt>. Here is an <a href="./tasks.json">example tasks JSON file</a>. It defines 4 tasks. The first task, &quot;root&quot; is a container only task - i.e. there's nothing to execute; it just has children. Container only tasks don't have a &quot;task type&quot;. Then, there is &quot;task1&quot; and &quot;task2&quot; both of which have a child task, &quot;task3&quot;. This means that &quot;task3&quot; will not execute until both &quot;task1&quot; and &quot;task2&quot; complete.</p></div>
<div class="section">
<h3><a name="Task_Types"></a>Task Types</h3>
<p>Every task has a TaskType. The TaskType is used by your TaskExecutor implementation to do the work of the task. TaskType's have three fields: &quot;type&quot;: a string that contains any value you define; &quot;version&quot;: a version string used to version the tasks; &quot;isIdempotent&quot;: whether or not the task is idempotent. TaskType also allows setting a priority or delay before a task executes.</p></div>
<div class="section">
<h3><a name="TaskExecutor"></a>TaskExecutor</h3>
<p>The TaskExecutor is a factory that you provide which creates TaskExecution instances. Every time a task needs to be executed, the newTaskExecution() method of TaskExecutor is called to get a new TaskExecution instance. The TaskExecution's execute() method is then called to do the work of the task and return a result. A task is executed randomly on one of the servers that is configured to handle tasks with that task type. Nirmata Workflow runs TaskExecutions in internally managed thread pools.</p></div>
<div class="section">
<h3><a name="WorkflowManagerBuilder"></a>WorkflowManagerBuilder</h3>
<p>WorkflowManagerBuilder is used to build WorkflowManager instances. For most uses, you will have one WorkflowManager per server/JVM in your cluster. However, you can create as many WorkflowManager instances as you need. The builder has the following methods:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center">withCurator</td>
<td align="center">Required to set the <a class="externalLink" href="http://curator.apache.org/">Curator</a> instance. You also specify a namespace and a version. The namespace and version combine to create a unique workflow. All instances using the same namespace and version are logically part of the same workflow.</td></tr>
<tr class="b">
<td align="center">addingTaskExecutor</td>
<td align="center">Adds a pool of task executors for a given task type to this instance of the workflow. The specified number of executors are allocated. Call this method multiple times to allocate executors for the various types of tasks that will be used in this workflow. You can choose to have all workflow instances execute all task types or target certain task types to certain instances.&#xa0;<br />&#xa0;<br />qty is the maximum concurrency for the given type of task for this instance. The logical concurrency for a given task type is the total qty of all instances in the workflow. e.g. if there are 3 instances in the workflow and instance A has 2 executors for task type &quot;a&quot;, instance B has 3 executors for task type &quot;a&quot; and instance C has no executors for task type &quot;a&quot;, the maximum concurrency for task type &quot;a&quot; is 5.&#xa0;<br />&#xa0;<br />IMPORTANT: every workflow cluster must have at least one instance that has task executor(s) for each task type that will be submitted to the workflow. i.e workflows will stall if there is no executor for a given task type.</td></tr>
<tr class="a">
<td align="center">withInstanceName</td>
<td align="center">optional - used in reporting. This will be the value recorded as tasks are executed. Via reporting, you can determine which instance has executed a given task. the Default is: <tt>InetAddress.getLocalHost().getHostName()</tt></td></tr>
<tr class="b">
<td align="center">withAutoCleaner</td>
<td align="center">optional - Sets an auto-cleaner that will run every given period. This is used to clean old runs. IMPORTANT: the auto cleaner will only run on the instance that is the current scheduler.</td></tr>
<tr class="a">
<td align="center">withSerializer</td>
<td align="center">optional - By default, a JSON serializer is used to store data in ZooKeeper. Use this to specify an alternate serializer.</td></tr>
<tr class="b">
<td align="center">withQueueFactory</td>
<td align="center">optional - Pluggable queue factory. Default uses ZooKeeper for queuing.</td></tr></table></div>
<div class="section">
<h3><a name="WorkflowManager"></a>WorkflowManager</h3>
<p>WorkflowManager is the main API. Through it, you submit tasks, etc. Once created with WorkflowManagerBuilder, call the <tt>start()</tt> method and the workflow system will operate asynchronously. You can <tt>submit()</tt> tasks at any time and from any instance.</p></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2014&#x2013;2018
<a href="http://nirmata.com/">Nirmata</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
